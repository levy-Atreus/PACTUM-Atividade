name: CI e PublicaÃ§Ã£o de Resultados de Teste

on:
  push:
    branches: [ "main", "master" ]
  pull_request:
    branches: [ "main", "master" ]
  workflow_dispatch:

jobs:
  test_and_publish:
    runs-on: ubuntu-latest
    
    # Define as permissÃµes necessÃ¡rias para o deploy no Pages
    permissions:
      contents: read
      pages: write
      id-token: write

    steps:
    - name: â¬‡ï¸ Checkout do CÃ³digo
      uses: actions/checkout@v4

    # --- ConfiguraÃ§Ã£o da Linguagem (ADAPTE AQUI) ---
    - name: âš™ï¸ Configurar Node.js (Exemplo)
      uses: actions/setup-node@v4
      with:
        node-version: '20' # Mude para a sua versÃ£o, se necessÃ¡rio
        
    - name: ğŸ“¦ Instalar DependÃªncias
      # Mude para o seu comando de instalaÃ§Ã£o (ex: 'pip install -r requirements.txt', 'mvn install')
      run: npm install

    - name: ğŸ§ª Rodar Testes e Preparar RelatÃ³rio para PublicaÃ§Ã£o
      # âš ï¸ ADAPTE OS COMANDOS ABAIXO para rodar seus testes e gerar um arquivo HTML ou texto
      run: |
        # 1. Executa seus testes. Substitua 'npm test' pelo seu comando de teste.
        # Exemplo: Se seus testes jÃ¡ geram um arquivo de relatÃ³rio em 'test-report.html', ignore a linha 2.
        npm test
        
        # 2. Cria a pasta _site (o padrÃ£o para artefatos do GitHub Pages)
        mkdir _site
        
        # 3. Cria um arquivo 'index.html' simples com o resultado.
        #    Se vocÃª tiver um relatÃ³rio de teste mais bonito (HTML), COPIE ele para _site/index.html
        echo "<h1>âœ… Testes Executados com Sucesso!</h1>" > _site/index.html
        echo "<p>Resultados dos testes em ${{ github.sha }} - $(date)</p>" >> _site/index.html
        
        # Exemplo se vocÃª tiver um relatÃ³rio: cp path/to/report.html _site/index.html

    # --- PublicaÃ§Ã£o no GitHub Pages ---
    - name: ğŸ”¨ Configurar GitHub Pages
      uses: actions/configure-pages@v4

    - name: â¬†ï¸ Publicar o Artefato (o conteÃºdo da pasta _site)
      uses: actions/upload-pages-artifact@v3
      with:
        path: './_site'

    - name: ğŸš€ Deploy no GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4